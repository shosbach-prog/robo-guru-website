(()=>{"use strict";const e=window.wp.hooks;const t="<svg aria-hidden='true' width='10' height='8' viewBox='0 0 10 8' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M9 1L3.5 6.5L1 4' stroke='#1E1E1E' stroke-opacity='0.5' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/></svg>",r=(e,t,r)=>{switch(r){case"progress-bar":return`Step ${e} of ${t}`;case"connector":return`${e} / ${t}`;default:return""}};class s{constructor(e){if(!e?.closest(".srfm-cf-ctn")){if(this.form=e,this.pageBreakContainers=e.querySelectorAll(".srfm-page-break"),this.pageBreakContainers){const t=this.pageBreakContainers[0],r=t?.querySelector("div.srfm-block, div.uagb-block");r||(t?.remove(),this.pageBreakContainers=e.querySelectorAll(".srfm-page-break"))}this.pageBreakLength=this.pageBreakContainers.length,this.gcaptchaDiv=e.querySelector(".g-recaptcha"),this.hcaptchaDiv=e.querySelector(".h-captcha"),this.turnstileDiv=e.querySelector(".cf-turnstile"),this.submitBtn=e.querySelector(".srfm-submit-container"),this.ajaxUrl=e.getAttribute("ajaxurl"),this.nonce=e.getAttribute("data-nonce")||e.getAttribute("nonce"),this.formId=e.getAttribute("form-id"),this.pageBreakHeader=e.querySelector(".srfm-page-break-header-container"),this.stepsParentDiv=e.querySelector(".srfm-page-break-progress-container"),this.pageBreakHeader&&(this.pagebreakCount=this.pageBreakHeader.querySelector(".srfm-step-count"),this.pagebreakTotalCount=this.pageBreakHeader.querySelector(".srfm-step-total"),this.pagebreakPageTitle=this.pageBreakHeader.querySelector(".srfm-steps-page-title"),this.progressIndicatorType=this.pageBreakHeader.getAttribute("type"),this.isShowLabel=this.pageBreakHeader.getAttribute("toggle-label"),this.connectorWrapper=e.querySelector(".srfm-progress-connector")),this.connectorParentDiv=e.querySelector(".srfm-steps-container"),this.currentActive=0,window.srfmFrontendData=window.srfmFrontendData||{},window.srfmFrontendData.currentPageBreakFormStep=this.currentActive,document.addEventListener("srfmGotoStep",(e=>{const t=e.detail.step;t<0||t>=this.pageBreakLength||(this.currentActive=parseInt(t,10),this.welcomeScreen&&(this.welcomeScreen.style.display="none",this.pageBreakHeader&&(this.pageBreakHeader.style.display="block"),this.pageBreakBtnContainer.style.display="flex"),this.currentActive===this.pageBreakLength-1?(this.nxtBtn.style.display="none",this.submitBtn.style.display="block",this.toggleCaptchaVisibility(!0),this.nxtBtn.replaceWith(this.submitBtn),this.toggleSaveResumeLink(!1),this.toggleSaveResumeSubmitLinkContainer(!0)):(this.toggleSaveResumeLink(!0),this.toggleSaveResumeSubmitLinkContainer(!1)),0!==this.currentActive?this.preBtn.style.visibility="visible":this.preBtn.style.visibility="hidden",window.srfmFrontendData.currentPageBreakFormStep=this.currentActive,this.updateProgressIndicator(),this.updatePageBreakDisplay(),this.update())})),this.preBtn=e.querySelector(".srfm-pre-btn"),this.nxtBtn=e.querySelector(".srfm-nxt-btn"),this.saveResumeLink=e.querySelector(".srfm-save-resume-link"),this.saveResumeSubmitLinkContainer=e.querySelector(".srfm-save-resume-submit-link-ctn"),this.saveResumePageBreakContainer=e.querySelector(".srfm-save-resume-page-break-ctn"),this.originalNxtBtn=this.nxtBtn,"progress-bar"===this.progressIndicatorType&&(this.progressBar=this.pageBreakHeader.querySelector(".srfm-page-break-indicator")),this.anchor=e.querySelector("#srfm-anchor"),this.welcomeScreen=e.querySelector(".srfm-welcome-screen"),this.pageBreakBtnContainer=e.querySelector(".srfm-page-break-buttons"),e.querySelectorAll(".srfm-page-break").forEach((e=>{e.addEventListener("keydown",(t=>{if("Enter"===t.key&&"TEXTAREA"!==e.ownerDocument.activeElement.tagName)return t.preventDefault(),!1}))}))}}announcePage(){this.anchor?.focus(),wp.a11y.speak(window?.srfm?.srfmSprintfString(window?.srfm_submit?.messages?.page_break_page_number,this.currentActive+1,this.pageBreakLength))}createPageBreakElements(){"steps"===this.progressIndicatorType&&this.connectorWrapper?this.connectorWrapper.innerHTML="":"connector"===this.progressIndicatorType&&this.connectorParentDiv&&this.connectorParentDiv.querySelectorAll(".srfm-round").forEach((e=>e.remove()));for(let e=0;e<this.pageBreakLength;e++)if("steps"===this.progressIndicatorType){const r=document.createElement("li");r.classList.add("srfm-circle");const s=document.createElement("div");if(s.classList.add("srfm-circle-shape"),s.innerHTML=t,r.append(s),this.isShowLabel){const t=document.createElement("span");t.classList.add("srfm-circle-text"),t.innerHTML=this.pageBreakContainers[e].getAttribute("data"),r.append(t)}0===e&&r.classList.add("active"),this.connectorWrapper.appendChild(r)}else if("connector"===this.progressIndicatorType){const r=document.createElement("div");r.className="srfm-round",0===e&&r.classList.add("active");const s=document.createElement("input");s.classList.add("srfm-round-checkbox"),s.type="checkbox",s.id=`srfm-round-checkbox-${e}`,s.disabled=!0;const i=document.createElement("label");i.htmlFor=`srfm-round-checkbox-${e}`,i.innerHTML=t,r.appendChild(s),r.appendChild(i),this.connectorParentDiv.appendChild(r)}"steps"===this.progressIndicatorType?this.wraps=this.form.querySelectorAll(".srfm-circle"):"connector"===this.progressIndicatorType?(this.wraps=this.form.querySelectorAll(".srfm-round"),this.checkbox=this.form.querySelectorAll(".srfm-round-checkbox"),this.pagebreakCount&&(this.pagebreakCount.textContent=r(1,this.pageBreakLength,this.progressIndicatorType),this.isShowLabel&&(this.pagebreakPageTitle.innerHTML=this.pageBreakContainers[0].getAttribute("data")))):"progress-bar"===this.progressIndicatorType&&(this.pagebreakCount.textContent=r(1,this.pageBreakLength,this.progressIndicatorType),this.isShowLabel&&(this.pagebreakPageTitle.innerHTML=this.pageBreakContainers[0].getAttribute("data")))}initializeFormState(e){this.welcomeScreen?(this.pageBreakHeader&&(this.pageBreakHeader.style.display="none"),this.pageBreakBtnContainer.style.display="none",this.welcomeScreen.querySelector(".srfm-start-btn").addEventListener("click",(e=>{e.preventDefault(),this.welcomeScreen.style.display="none",this.pageBreakContainers[this.currentActive].classList.add("right"),this.pageBreakContainers[this.currentActive].style.display="flex",this.pageBreakBtnContainer.style.display="flex",this.pageBreakHeader&&(this.pageBreakHeader.style.display="block")}))):this.pageBreakContainers[this.currentActive].style.display="flex",this.submitBtn.style.display="none",this.submitBtn.style.width="auto",this.submitBtn.style.margin="0",this.toggleCaptchaVisibility(!1),this.toggleSaveResumeSubmitLinkContainer(!1),this.preBtn&&0===this.currentActive&&(this.preBtn.style.visibility="hidden"),this.nxtBtn&&this.nxtBtn.addEventListener("click",(t=>this.handleNextButtonClick(t,e))),this.preBtn&&this.preBtn.addEventListener("click",(t=>this.handlePreviousButtonClick(t,e))),"progress-bar"===this.progressIndicatorType&&this.updateProgressBarIndicator()}async handleNextButtonClick(t){t.preventDefault();const r=await async function(t,r,s,i,n=!1){let a=!1,o=null,l=null,c={};const u=(e,t,r={})=>{o||(o=e,l=t,c=r)};let d=null;const h=document.querySelectorAll('input[data-unique="true"]');if(0!==h.length){const e={};for(const t of h){const r=t.name,s=t.value;e[r]=s}d=await async function(e,t,r,s){let i="action=validation_ajax_action&nonce="+encodeURIComponent(s)+"&id="+encodeURIComponent(t);Object.keys(e).forEach((t=>{i+="&"+encodeURIComponent(t)+"="+encodeURIComponent(e[t])}));try{const e=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i});if(e.ok)return(await e.json()).data}catch(e){console.error(e)}}(e,t,r,s)}const m=n?[i]:Array.from(i.querySelectorAll(".srfm-block-single"));for(const r of m){let s,i,n=!1;if(Array.isArray(window.sureforms?.skipValidationCallbacks)&&window.sureforms.skipValidationCallbacks.forEach((e=>{"function"==typeof e&&(n=n||e(r))})),n)continue;if(r.closest("form").getAttribute("form-id")!==t)continue;!0===r.classList.contains("srfm-phone-block")?(s=r.querySelector(".srfm-input-phone"),i=s?.nextElementSibling?.value):(s=r.querySelector("input, textarea, select"),i=s.value);const o=s.getAttribute("data-required"),l=s.getAttribute("data-unique");let c=s.getAttribute("name");const h=r.querySelector(".srfm-error-message");if(c&&(c=c.replace(/_/g," ")),o&&"hidden"!==s.type&&("true"!==o||i?s&&window?.srfm?.toggleErrorState(s.closest(".srfm-block"),!1):(s&&window?.srfm?.toggleErrorState(s.closest(".srfm-block"),!0),h&&(h.textContent=h.getAttribute("data-error-msg")),a=!0,u(s,s.closest(".srfm-block"))),s.addEventListener("input",(()=>{window?.srfm?.toggleErrorState(s.closest(".srfm-block"),!1)}))),"true"===l&&""!==i){const e=d?.some((e=>"not unique"===e[c]));e?(s&&window?.srfm?.toggleErrorState(s.closest(".srfm-block"),!0),h.style.display="block",h.textContent=h.getAttribute("data-unique-msg"),a=!0,u(s,s.closest(".srfm-block"))):s&&(window?.srfm?.toggleErrorState(s.closest(".srfm-block"),!1),h.style.display="none")}if(r.classList.contains("srfm-multi-choice-block")||r.classList.contains("srfm-checkbox-block")||r.classList.contains("srfm-gdpr-block")){const e=r.querySelectorAll("input"),t=e[0].getAttribute("data-required");let s=!1,i=null;for(let t=0;t<e.length;t++)if(i||"hidden"===e[t].type||(i=e[t]),e[t].checked){s=!0;break}"true"!==t||s?h&&window?.srfm?.toggleErrorState(r,!1):(h&&(h.textContent=r.querySelector(".srfm-error-message").getAttribute("data-error-msg"),window?.srfm?.toggleErrorState(r,!0)),a=!0,u(i,r)),e.forEach((e=>{e.addEventListener("input",(()=>{window?.srfm?.toggleErrorState(r,!1)}))}))}if(r.classList.contains("srfm-url-block")){const e=r.querySelector("input");r.classList.contains("srfm-url-error")&&(window?.srfm?.toggleErrorState(r,!0),a=!0,u(e,r)),e.addEventListener("input",(()=>{window?.srfm?.toggleErrorState(r,!1)}))}if(r.classList.contains("srfm-phone-block")){const e=r.querySelectorAll("input")[1];r.classList.contains("srfm-phone-error")&&(window?.srfm?.toggleErrorState(r,!0),a=!0,u(e,r)),r.querySelectorAll("input").forEach((e=>{e.addEventListener("input",(()=>{window?.srfm?.toggleErrorState(r,!1)}))}))}if(r.classList.contains("srfm-email-block-wrap")){const e=r;if(e){const t=e.querySelector(".srfm-email-confirm-block");if(e.classList.contains("srfm-valid-email-error")&&(u(s,e),a=!0),t){const e=t.querySelector(".srfm-input-email-confirm"),r=t.querySelector(".srfm-input-email-confirm").value,s=t.querySelector(".srfm-error-message");!r&&s&&"true"===o?(s.textContent=s.getAttribute("data-error-msg"),window?.srfm?.toggleErrorState(t,!0),u(e,t),a=!0):r!==i?(window?.srfm?.toggleErrorState(t,!0),s.textContent=window?.srfm_submit?.messages?.srfm_confirm_email_same,u(e,t),a=!0):window?.srfm?.toggleErrorState(t,!1),e.addEventListener("input",(()=>{window?.srfm?.toggleErrorState(t,!1)}))}e.querySelector(".srfm-input-email").addEventListener("input",(()=>{window?.srfm?.toggleErrorState(e,!1)}))}}if(r.classList.contains("srfm-upload-block")){const e=r.querySelector(".srfm-input-upload"),t=e.getAttribute("data-required");"true"!==t||e.value?s&&window?.srfm?.toggleErrorState(s.closest(".srfm-block"),!1):("true"===t&&h&&(h.textContent=h.getAttribute("data-error-msg")),s&&window?.srfm?.toggleErrorState(s.closest(".srfm-block"),!0),a=!0,u(e,r)),e.addEventListener("input",(()=>{s&&window?.srfm?.toggleErrorState(s.closest(".srfm-block"),!1)}))}if(r.classList.contains("srfm-number-block")){const e=s.getAttribute("min"),t=s.getAttribute("max"),n=s.getAttribute("format-type");if(i){const o="eu-style"===n?parseFloat(i.replace(/\./g,"").replace(",",".")):parseFloat(i.replace(/,/g,""));if(e||t){let i=!1,n="";e&&""!==e&&Number(o)<Number(e)?(i=!0,n=window?.srfm?.srfmSprintfString(window?.srfm_submit?.messages?.srfm_input_min_value,e)):t&&""!==t&&Number(o)>Number(t)&&(i=!0,n=window?.srfm?.srfmSprintfString(window?.srfm_submit?.messages?.srfm_input_max_value,t)),window?.srfm?.toggleErrorState(s.closest(".srfm-block"),i),h&&(h.textContent=i?n:"",i&&(a=!0,u(s,r)))}}}if(r.classList.contains("srfm-rating-block")){const e=r.querySelector(".srfm-input-rating");"true"!==e.getAttribute("data-required")||e.value?window?.srfm?.toggleErrorState(e.closest(".srfm-block"),!1):(window?.srfm?.toggleErrorState(e.closest(".srfm-block"),!0),a=!0,u(r.querySelector(".srfm-icon"),r))}if(r.classList.contains("srfm-slider-block")){const e=r.getAttribute("data-required"),t=r.querySelector(".srfm-input-slider"),s=r.querySelector(".srfm-text-slider"),i=r.getAttribute("data-default");if("true"===e){let e=!1;(!t||t.dataset.interacted||i&&"false"!==i)&&(!s||s.dataset.interacted||i&&"false"!==i)||(e=!0),e?(window?.srfm?.toggleErrorState(r,!0),a=!0,u(t,r)):window?.srfm?.toggleErrorState(r,!1)}}if(r.classList.contains("srfm-dropdown-block")){const e=r.querySelectorAll(".srfm-input-dropdown-hidden"),t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;e.forEach((e=>{const r=e.getAttribute("data-required"),s=e.getAttribute("name");if("true"!==r||e.value)if(e.value){const t=e.getAttribute("data-min-selection"),r=e.getAttribute("data-max-selection");if(t||r){const s=window.srfm.srfmUtility.extractValue(e.value);t&&s.length<t?(h.textContent=window?.srfm?.srfmSprintfString(window?.srfm_submit?.messages?.srfm_dropdown_min_selections,t),window?.srfm?.toggleErrorState(e.closest(".srfm-block"),!0),a=!0):r&&s.length>r&&(h.textContent=window?.srfm?.srfmSprintfString(window?.srfm_submit?.messages?.srfm_dropdown_max_selections,r),window?.srfm?.toggleErrorState(e.closest(".srfm-block"),!0),a=!0)}}else window?.srfm?.toggleErrorState(e.closest(".srfm-block"),!1);else h.textContent=h.getAttribute("data-error-msg"),window?.srfm?.toggleErrorState(e.closest(".srfm-block"),!0),a=!0;if(a){const t=window?.srfm?.[s]||e;u(t,e.closest(".srfm-block"),{shouldDelayOnFocus:!0})}new t((()=>{e.value?window?.srfm?.toggleErrorState(e.closest(".srfm-block"),!1):"true"===r&&window?.srfm?.toggleErrorState(e.closest(".srfm-block"),!0)})).observe(e,{attributes:!0,attributeFilter:["value"]})}))}if(r.classList.contains("srfm-multi-choice-block")){const e=r.querySelectorAll("input"),t=e[0].getAttribute("data-min-selection"),s=e[0].getAttribute("data-max-selection");let i=null,n=0,l=!1;for(let t=0;t<e.length;t++)i||"hidden"===e[t].type||(i=e[t]),e[t].checked&&n++;(t||s)&&n>0&&(!l&&t>0&&(o&&t>1||!o)&&n<t&&(h.textContent=window?.srfm?.srfmSprintfString(window?.srfm_submit?.messages?.srfm_multi_choice_min_selections,t),l=!0),!l&&s>0&&n>s&&(h.textContent=window?.srfm?.srfmSprintfString(window?.srfm_submit?.messages?.srfm_multi_choice_max_selections,s),l=!0),l?(window?.srfm?.toggleErrorState(r,!0),u(i,r),a=!0):o||window?.srfm?.toggleErrorState(r,!1))}a=(0,e.applyFilters)("srfm.modifyFieldValidationResult",a,r,u)}return!!a&&{validateResult:a,firstErrorInput:o,scrollElement:l,...c}}(this.formId,this.ajaxUrl,this.nonce,this.pageBreakContainers[this.currentActive]);r?(e=>{if(e?.firstErrorInput){if(e?.scrollElement){const t=e.scrollElement.getBoundingClientRect().top+window.pageYOffset-window.innerHeight/2;window.scroll({top:t,behavior:"smooth"})}e?.shouldDelayOnFocus?setTimeout((()=>{e.firstErrorInput.focus({preventScroll:!0})}),500):e.firstErrorInput.focus({preventScroll:!0})}})(r):(this.currentActive++,this.announcePage(),this.currentActive===this.pageBreakLength-1?(this.nxtBtn.style.display="none",this.submitBtn.style.display="block",this.toggleCaptchaVisibility(!0),this.nxtBtn.replaceWith(this.submitBtn),this.toggleSaveResumeLink(!1),this.toggleSaveResumeSubmitLinkContainer(!0)):(this.toggleSaveResumeLink(!0),this.toggleSaveResumeSubmitLinkContainer(!1)),0!==this.currentActive&&(this.preBtn.style.visibility="visible"),window.srfmFrontendData.currentPageBreakFormStep=this.currentActive,this.updateProgressIndicator(),this.updatePageBreakDisplay(),this.update())}handlePreviousButtonClick(e){e.preventDefault(),this.currentActive--,this.announcePage(),this.currentActive<=0&&(this.preBtn.style.visibility="hidden"),this.currentActive<=this.pageBreakLength-1&&(this.nxtBtn.disabled=!1,"block"===this.submitBtn.style.display&&(this.submitBtn.style.display="none",this.toggleCaptchaVisibility(!1),this.originalNxtBtn.style.display="block",this.submitBtn.replaceWith(this.originalNxtBtn))),window.srfmFrontendData.currentPageBreakFormStep=this.currentActive,this.toggleSaveResumeLink(!0),this.toggleSaveResumeSubmitLinkContainer(!1),this.updateProgressIndicator(),this.updatePageBreakDisplay(),this.update()}updatePageBreakDisplay(){for(let e=0;e<this.pageBreakLength;e++)this.pageBreakContainers[e]&&(this.pageBreakContainers[e].style.display=e===this.currentActive?"flex":"none"),e<this.currentActive?(this.pageBreakContainers[e].classList.add("left"),this.pageBreakContainers[e].classList.remove("right"),this.wraps&&"steps"===this.progressIndicatorType&&this.wraps[e].classList.add("filled"),this.checkbox&&(this.checkbox[e].checked=!0)):(this.pageBreakContainers[e].classList.add("right"),this.pageBreakContainers[e].classList.remove("left"),this.wraps&&"steps"===this.progressIndicatorType&&this.wraps[e].classList.remove("filled"),this.checkbox&&(this.checkbox[e].checked=!1))}toggleSaveResumeLink(e){this.saveResumeLink&&(e?(this.saveResumeLink.style.display="",this.saveResumeLink.style.visibility="visible"):(this.saveResumeLink.style.display="none",this.saveResumeLink.style.visibility="hidden"))}toggleSaveResumeSubmitLinkContainer(e){this.saveResumeSubmitLinkContainer&&(e?(this.saveResumeSubmitLinkContainer.style.display="",this.saveResumeSubmitLinkContainer.style.visibility="visible"):(this.saveResumeSubmitLinkContainer.style.display="none",this.saveResumeSubmitLinkContainer.style.visibility="hidden")),this.saveResumePageBreakContainer&&(this.saveResumePageBreakContainer.style.display=e?"block":"flex")}update(){this.wraps&&0!==this.wraps.length&&this.wraps.forEach(((e,t)=>{t<=this.currentActive?e.classList.add("active"):e.classList.remove("active")})),"progress-bar"===this.progressIndicatorType&&this.updateProgressBarIndicator()}toggleCaptchaVisibility(e){const t=e?"block":"none";this.gcaptchaDiv&&(this.gcaptchaDiv.style.display=t),this.hcaptchaDiv&&(this.hcaptchaDiv.style.display=t),this.turnstileDiv&&(this.turnstileDiv.style.display=t)}updateProgressIndicator(){("connector"===this.progressIndicatorType&&this.pagebreakCount||"progress-bar"===this.progressIndicatorType)&&(this.pagebreakCount.textContent=r(this.currentActive+1,this.pageBreakLength,this.progressIndicatorType),this.isShowLabel&&(this.pagebreakPageTitle.innerHTML=this.pageBreakContainers[this.currentActive].getAttribute("data")))}updateProgressBarIndicator(){const e=Math.floor((this.currentActive+1)/this.pageBreakLength*100);this.progressBar.value=e}}document.addEventListener("DOMContentLoaded",(function(){srfmLoadPageBreak()})),window.addEventListener("elementor/popup/show",(function(e){const t=e?.detail?.instance?.$element?.[0]?.querySelector(".srfm-form-container");t&&srfmLoadPageBreak()})),window.srfmLoadPageBreak=function(){const e=Array.from(document.querySelectorAll(".srfm-form")).filter((e=>e.querySelector(".srfm-page-break")));if(!e.length)return;const t=window?.srfm_page_break_data?.is_bricks_preview,r=window?.srfm_page_break_data?.is_elementor_preview;e.forEach((e=>{const i=new s(e);i.createPageBreakElements(),t||r||i.initializeFormState(t,r)}))}})();