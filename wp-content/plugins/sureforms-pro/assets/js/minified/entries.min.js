(()=>{function e(){var l=document.querySelector(".entry-notes");if(l){var u=document.querySelector(".srfm-add-entry-note-button");let r=document.querySelector(".srfm-entry-note-wrapper .entry-notes-container"),e=document.querySelector(".add-notes-field"),t=e.querySelector("#srfm-entry-note");var f=e.querySelector("button");let o=l.querySelector(".in-progress-overlay"),n=document.querySelectorAll(".entry-notes-nav-btn"),a={},s={},c=!1,d=()=>{e.classList.contains("hidden")&&e.classList.remove("hidden"),t?.focus()},i=async(t={})=>{o.classList.remove("hidden");let n=new FormData;n.append("entryID",srfm_pro_entries.entryID),Object.keys(a).forEach(e=>{"markup"!==e&&n.append(e,a[e])}),Object.keys(t).forEach(e=>{n.append(e,t[e])}),s=a,await fetch(srfm_pro_entries.ajaxURLs.navigateNotes,{method:"POST",body:n}).then(e=>e.json()).then(e=>{e?.success&&(r.innerHTML=e?.data?.markup,a=e?.data||{},document.querySelectorAll(".btn-delete-note").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),confirm("Are you sure you want to delete this note?")&&i({deleteNote:t.getAttribute("data-note-key"),...s}).then(()=>{0===a?.totalPages&&d()})})}),document.querySelector('.entry-notes-nav-btn[data-type="next"]').classList.toggle("disabled",!a?.nextPage),document.querySelector('.entry-notes-nav-btn[data-type="prev"]').classList.toggle("disabled",!a?.prevPage))}).finally(()=>{o.classList.add("hidden")}),(()=>{var e=document.querySelectorAll(".srfm-btn-show"),t=document.querySelectorAll(".srfm-btn-hide");let n=(t,n)=>{t.addEventListener("click",e=>{e.preventDefault();e=t.closest(".entry-note-item");"show"===n?(e.querySelector(".srfm-note-full").classList.remove("hidden"),e.querySelector(".srfm-note-excerpt").classList.add("hidden")):(e.querySelector(".srfm-note-full").classList.add("hidden"),e.querySelector(".srfm-note-excerpt").classList.remove("hidden"))})};e.forEach(e=>n(e,"show")),t.forEach(e=>n(e,"hide"))})()};u.addEventListener("click",e=>{e.preventDefault(),d()}),f.addEventListener("click",async e=>{e.preventDefault(),o.classList.remove("hidden");e=new FormData;e.append("note",t.value),e.append("entryID",srfm_pro_entries.entryID),await fetch(srfm_pro_entries.ajaxURLs.saveNotes,{method:"POST",body:e}).then(e=>e.json()).then(()=>{a={},s={},t.value="",i()})}),i(),c||(c=!0,n.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),i({type:t.getAttribute("data-type")})})}))}}function f(){var t=document.querySelector(".srfm-entry-logs");if(t){let r={},o={},e=t.querySelector(".in-progress-overlay"),a=t.querySelector(".inside");t=t.querySelectorAll(".entry-logs-navigation-btn");let s=async(t={})=>{e.classList.remove("hidden");let n=new FormData;n.append("entryID",srfm_pro_entries.entryID),Object.keys(r).forEach(e=>{"markup"!==e&&n.append(e,r[e])}),Object.keys(t).forEach(e=>{n.append(e,t[e])}),o=r,await fetch(srfm_pro_entries.ajaxURLs.navigateLogs,{method:"POST",body:n}).then(e=>e.json()).then(e=>{e?.success&&(r=e?.data||{},a.innerHTML=r?.markup,document.querySelectorAll(".btn-delete-log").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),confirm(wp.i18n.__("Are you sure you want to delete this log?","sureforms-pro"))&&s({deleteLog:this.getAttribute("data-log-key"),...o})})}),!1===r?.nextPage?document.querySelector('.entry-logs-navigation-btn[data-type="next"]').classList.add("disabled"):document.querySelector('.entry-logs-navigation-btn[data-type="next"]').classList.remove("disabled"),!1===r?.prevPage?document.querySelector('.entry-logs-navigation-btn[data-type="prev"]').classList.add("disabled"):document.querySelector('.entry-logs-navigation-btn[data-type="prev"]').classList.remove("disabled"))}).finally(()=>{e.classList.add("hidden")})};s(),t.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),s({type:this.getAttribute("data-type")})})})}}window.addEventListener("load",function(){{let t=document.getElementById("srfm-edit-entry-modal");t&&(d=document.querySelector(".button.srfm-edit-entry"),i=document.querySelectorAll(".srfm-cancel-entry-btn"),d.addEventListener("click",function(e){e.preventDefault(),t.showModal(),document.body.style.overflow="hidden"}),i.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),t.close(),f(),document.body.style.overflow="scroll"})}))}e(),f();{let s=document.getElementById("srfm-resend-notification-modal"),c=document.querySelector(".srfm-resend-notification-trigger-btn");if(s||c){let n={},t=document.querySelectorAll(".sureforms-table-container tbody .check-column input");var d=document.querySelectorAll(".sureforms-table-container .column-cb input");t.forEach(function(e){e.addEventListener("input",function(){n[this.value]=this.checked,l()})}),d.forEach(function(e){e.addEventListener("input",function(){t.forEach(function(e){n[e.value]=e.checked}),l()})});let r=0,e=s.querySelector(".recipient-field-group"),o=(s.querySelector('[name="send_to"]')?.addEventListener("change",function(){"default"===this.value?e.classList.add("hidden"):e.classList.remove("hidden")}),s.querySelectorAll(".srfm-resend-notification-field"));var d=s.querySelector(".srfm-resend-notification"),i=s.querySelector(".srfm-cancel-resend-notification");let a=s.querySelector(".in-progress-overlay");function l(){0<Object.keys(n).filter(e=>!0===n[e]).length?c.classList.remove("hidden"):c.classList.add("hidden")}function u(e){f();var t=document.getElementById("wpbody-content");t.insertAdjacentHTML("beforeend",e.data),t.querySelector(".srfm-resend-notification-message .close")?.addEventListener("click",function(){document.querySelector(".srfm-resend-notification-message")?.remove()}),clearTimeout(r),r=setTimeout(()=>document.querySelector(".srfm-resend-notification-message")?.remove(),5e3),s.close()}c.addEventListener("click",function(e){e.preventDefault(),document.querySelector(".srfm-resend-notification-message")?.remove(),s.showModal()}),d?.addEventListener("click",async function(e){e.preventDefault(),document.querySelector(".srfm-resend-notification-message")?.remove(),a.classList.remove("hidden");let t=new FormData;o.forEach(function(e){t.append(e.getAttribute("name"),e.value)}),Object.keys(n).length&&t.append("entry_ids",Object.keys(n).filter(e=>!0===n[e]).join(",")),await fetch(srfm_pro_entries.ajaxURLs.resendNotification,{method:"POST",body:t}).then(e=>e.json()).then(u).finally(()=>a.classList.add("hidden"))}),i.addEventListener("click",function(e){e.preventDefault(),s.close()})}}document.dispatchEvent(new CustomEvent("srfm-entry-initialized"))})})();