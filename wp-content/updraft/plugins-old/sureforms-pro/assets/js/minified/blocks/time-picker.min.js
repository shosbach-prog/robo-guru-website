function initializeTimePicker(){var e=document.querySelectorAll(".srfm-time-picker-block");function d(e,t,i){t?(e.classList.add("hidden"),e.classList.remove("active"),e.closest(".srfm-time-picker-block").classList.remove("srfm-high-z-index"),i?.setAttribute("aria-expanded","false")):(e.removeAttribute("style"),e.classList.add("active"),e.classList.remove("hidden"),e.closest(".srfm-time-picker-block").classList.add("srfm-high-z-index"),i?.setAttribute("aria-expanded","true"),0<=!i.getBoundingClientRect().top&&!i.getBoundingClientRect().bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"}))}e.length<1||(e.forEach(t=>{let i=t.querySelector(".srfm-input-time-picker"),r=t.querySelector(".srfm-time-picker");var e,n,s,a=r.querySelectorAll(".srfm-time-picker-item");let c=-1,o=-1,l=Array.from(a);i.getAttribute("placeholder")||i.setAttribute("placeholder",([e=!1]=[i.getAttribute("data-twelve-hour-format")],n=(s=new Date).getHours(),s=s.getMinutes().toString().padStart(2,"0"),e?(n%12||12)+`:${s} `+(12<=n?window?.srfm_submit?.messages?.timepicker_pm:window?.srfm_submit?.messages?.timepicker_am):n.toString().padStart(2,"0")+":"+s)),t.addEventListener("keydown",function(e){"Escape"===e.key?(i.focus(),d(r,!0,i)):"ArrowDown"!==e.key&&"ArrowUp"!==e.key||r.className.includes("hidden")?"Enter"===e.key&&(e.preventDefault(),l[c]?.click(),i.setAttribute("aria-activedescendant",l[c]?.id),d(r,!0,i)):(e.preventDefault(),(c=(c+("ArrowDown"===e.key?1:-1))%l.length)<0&&(c=l.length-1),l[c].focus())}),a.forEach((e,t)=>{e.addEventListener("click",function(){var e=this.dataset.timeView,e=(i.value=e,o=t,i.setAttribute("aria-activedescendant",l[o].id),i.focus(),i.setAttribute("value",i.value),new Event("change",{bubbles:!1,cancelable:!0}));i.dispatchEvent(e),d(r,!0,i)})}),i.addEventListener("focus",function(){d(r,!r.className.includes("hidden"),i)}),i.addEventListener("click",function(){d(r,!1,i)}),i.addEventListener("input",function(){this.value=""}),i.addEventListener("keydown",function(e){" "===e.key&&(e.preventDefault(),d(r,!1,i))}),t.addEventListener("focusout",function(e){e.relatedTarget?.className?.includes("srfm-time-picker-item")||(c!==o&&(c=o),"true"!==i.getAttribute("data-required")||i.value?window?.srfm?.toggleErrorState(t,!1):window?.srfm?.toggleErrorState(t,!0),d(r,!0,i))})}),document.addEventListener("mousedown",function(e){e=e?.target?.className;"string"==typeof e&&(e.includes("srfm-time-picker-item")||e.includes("srfm-time-picker"))||document.querySelectorAll(".srfm-time-picker.active").forEach(function(e){d(e,!0)})}))}window.srfmInitializeTimePicker=initializeTimePicker,document.addEventListener("srfm_form_before_submission",e=>{var e=e.detail?.form;e&&(e=e.querySelectorAll(".srfm-time-picker-block"))&&0!==e.length&&setTimeout(()=>{initializeTimePicker()},100)});